# Q&A

- date: 2023-03-09 10:49
- tags: life,work,qa
- category: life

-------------------

Q：是不是因为你写的 eru 所以你对换 k8s 有意见所以觉得克劳德和六边形是傻逼

A：事实是这样的：

1. 2018 年我最先提出不要用过时的 mesos 了，用 k8s，雷老板多番考虑以后以产品优先拒绝了这项提议
2. POC 的过程我自行决策，我当然用已经在芒果TV和 ENJOY 验证过的架构技术，除了 Proxy 以外 Cachecloud 第一版和我曾经跑的 redis cluster 容器化集群没任何区别
3. 后期以中间件产品优先，必然不会出现100m赛跑跑20m就把腿砍掉的事，实际上至始至终在 eru 上的同学也就 4 个人，还大多数在搞网络和虚拟机
4. 2020 年我们 poc 了 k8s as service，类似于 ack，被按下来了，后来隔壁组搞了 bromo
5. 2021 年我们计划实现 k8s API 层，后来没需求换为完整接入 CNI https://github.com/projecteru2/docker-cni
6. Eru 在服务 SEA 从 30亿刀到 2000亿刀的过程中，因为其自身问题导致的 P1 只有2次，均为 Agent 因为同步 forward 日志导致业务进程阻塞，具体报告内网可查
7. 我要是有能耐能「迫使」某家东南亚最大的互联网公司用自己的轮子长达 4 年之久，那你们也太高看我了
8. 我评价克劳德是蠢没说过他坏，自己原话说过「确实 appinfra 里面 SPP 的业务是最大的」，然后自己把自己手上的牌一张张撕掉，kernel 换 space，vm 换 ecp，最后被 STO 连本带利拿了回来，自己一个 D 做 SEE 的活去了
9. 同时我也没说六边形是傻逼，说起来他可比克劳德聪明多了，我说他是菜。infra 圈菜就是原罪，你可以说你在顺丰干得好，你可以说在 merchant 干得不错，你可以讲啊业务上叶少很不错的，但很可惜一码事归一码事，虾皮 infra 折腾了一年这位所谓的「技术委员会主席」有啥产出？gitlab 关权限？既要「我不懂数据库」又要指点 OKR 制定，还去 InfoQ 说自己是六边形战士…评价一句菜没毛病吧。至于所谓他动口会毁了我，别逗了，大家圈内 reputation 半斤八两，谁不知道谁啊。

Q：那你为啥要造 Eru 这个轮子

A：2015 年早期 k8s 没出生只有 borg 论文，mesos 的框架不适合长时间的容器服务，没有 swarm，腾讯基于 yarn 做了 gaia，豆瓣一系做了 lain，各家都做了各家自己的调度轮子，我自己在芒果 TV 做自己的轮子没毛病吧，结合 macvlan 做缓存容器花集群也没毛病吧。实际上在那年 codis 代表着一派 redis 的集群解决方案，3.0 rc1 开始提供的 cluster 方式+proxy 代表另外一派集群解决方案，我们当年给出的 proxy 方案是 https://github.com/projecteru/redis-cerberus，这项目至今还挂在第一代 eru 的组织下

Q：听说有个「喷陈宗志不是 Pika 之父的某自称 Pika 之父」的前 360 从业人员对 copi2 彼有微词是否属实

A：事实如下：

1. 此人确实以 Pika 核心研发之名进的虾皮，级别 SEE
2. 基于有什么样的人打什么样的牌，我和 linf 支持其基于 Pika 做 KV 持久化存储，但集群上面 Pika 一直没有很好的方案，因此结合了 SRE 很熟悉的 Codis 上层逻辑实现了第一代 Copi
3. 第一代 Copi 实际运行中有很多问题包括不仅限于 Codis 的 slot 和 pika 的 slot 是两种不同的概念，没法通过 Codis 的 API 进行 scaling，双向二进制同步丢数据，性能毛刺等，这位工程师在长达一年的基建服务中态度逐渐暴躁
4. 暴躁的后果就是 Cachecloud 在 Deep/Ads 那边积累的口碑 reputation 几乎被 Copi 全毁，以至于发生了著名的第二次因为丢数据和性能问题此工程师深夜喷用户 Shawn Fu 事件
5. 此人回国期间长时间 on duty 找不到人
6. 我和 linf 处理了这事，考虑到实际产出（长达一年解决不了丢数据和性能毛刺问题）和服务态度，决定年末绩效打 C，当年的 C 是要写报告的，我懒，后期改为当时尚未公布的潜规则 B-
7. 此人提出转岗，我们爽快答应
8. 我们找到一个阿里做 KV 一线 P8，招来后讨论了下决定启动 Copi2 研发。因为开源圈确实没合适的 KV 存储。kvrocks 一类的解决了 Pika 用 rsync 同步数据问题但没解决集群问题，京东的 sssdb 吧这种 redis 进程+基于 rocksdb 存储进程中间走 pipe 的方式也不是不行，但他们 redis 版本太老了。基于这个思路我们魔改了 redis6，实现了 rediskv，not redis compatible but original redis，因此可以复用 cachecloud 的所有基建，这就是 copi2 的由来
9. 自己丢了饭碗被人捡了还发扬光大了不爽理不理解，都理解，但能力不行态度也不行怎么说的，好好享受虾皮给你的股票吧，别整这些有得没得的

Q：这个工程师说我是打了绩效 C 被「开除」的，并求着公司给了几个月的带薪假期

A：事实是这样的：

1. 我的合同是 Garena PTE LTD，按照法律贵 Shopee PTE LTD 似乎是没能力「开除」我的
2. 2021 年 Q3-Q4 期间，由于克劳德的骚操作和公示大师兄做 HOD 我已经开始准备后事，包括不仅限于 refer 和快速批准我团队部分成员去 SEA 总部公有云部门，提供外界职场信息内推等。在 2021 年 12月北京出差时克劳德和六边形找我说要给我空降个新老板，我那时候回来就找了业内朋友看其他机会了，并告知了克劳德年终后我会转岗，你们要恰这口饭恰就是了
3. 那个时候起我在推特吐槽团队管理的一些事情，比如一个几年 pulse 分公司 TOP 离职转岗率几乎为 0 的团队，突然大部分要走要转岗，以及骂大师兄是个傻逼
4. 疫情期间的 OIL 我都攒着没用，也没法用，每年年假也是一直顺延到了 2022，大体上 2022 年我有 2 个多月假期
5. 2022 年 1 月年终评定的时候克劳德原话是「你管理 feedback 分很高，年末评定是 B」
6. 2022 年 2 月 25 日六边形找我视频，原话是「因为你不会管理因此决定绩效给 C 并解除职务，你自己转岗吧」。当晚，HRBP Iris 就把我从各管理群踢掉，我自己也退掉了余下的。我找 cloud 发了 3 段消息，第一段大意就是好好聊一下，已读不回，第二段就是你这样我肯定要公司内折腾一下的，已读不回，第三段是好既然这么不体面媒体见，已读不回。于是我找雷老板，雷老板建议找 alice 进行申诉，期间我对 ctalk 和邮件做了备份
7. 不管是 ads 组还是当时建在的 linlin 组都愿意接收我转岗，六边形也同意，巧合的是公司恰好当天改了转岗规则，必须上一个季度绩效 B 才能转，而非以前的上一个年度，大师兄很麻溜的回了个邮件，拒绝了我的转岗请求
8. 申诉材料准备期间，ctalk 和 email 权限回收，我并无能力「主动」找贵司任何一人进行沟通交流，甚至材料都是同事代为转发
9. 3 月申诉听证会，录音大家都听到了，最终判定是「OKR 没有 100% 完成因此 Q4 绩效为 C」，此处我也放过我 12 月和克劳德的 ctalk 聊天记录截图，我已经告知了他 RDS 迁移有进度有风险，当然他回的是他要去滑雪
10. 3 月听证会之前我已经跟 HRBP 说我会离职，听证会后她提到结果不变公司也在调查我在推特「泄露公司机密」以及「对公司高层不友善」，我表示没事，反正要走了也不劳烦你们了，但 OIL 和年假你得兑现，HRBP 系统另外一个小姑娘表示可以，那就给你做到 6 月中。
11. HRBP 最后结语原话「也不是能力问题，道不同吧」
12. 我同事问 HRBP 我是否因为表面原因包括不仅限于「OKR 没有 100% 完成」「只 review 代码没写代码」「文档输出不够」「代码都放在 github」这种理由打 C 的时候 HRBP 原话是「真实原因我不能告诉你」
13. 当然非真实原因也麻烦各位 CN 高层统一下口径，帽子都带不整齐

最后提供一些事实和我的看法

1. 包括 Cachecloud 组在内，跟我直接有过工作关系的在我解职时我都写了邮件，大概 40+ 人
2. 这些人，基本无一留在了虾皮
3. 整个 SPP 团队不管是 pulse 分还是 feedback 都是公司级 TOP
4. 这些人转岗/解雇/离职基本都发生于六边形管理期间
5. 同一时间 SG 几位中层管理人员都「不体面」的离开了公司，我自己知道的至少有 3，你单纯说我有问题……好吧我有问题，但至少 3 个都有问题？不体面这锅总不能是咱们背吧？
6. 虽然 SPP STO 常年不和，技术理念也有差异，相持的那几年我认为 mars 才是一个强大的对手，而非你们想的那个人…事实上 SG 这边也只剩他的，如果转组的话建议 STO
7. 大家都是干了十几年的老王八，别扯什么回中国就眼界更广技术更好，你，huang yi chen，思维本体学大师兄，还真没资格跟我说这句话，我吃过的饭比你他妈吃过的盐都多
8. 搞技术，菜就是原罪，对于内源性产品的 Infra 来说，来自于外部驱动的产品负责人来做行不行，当然行，前提是你有产出，你落地了什么玩意降了什么本增了什么效又自动化了啥，否则，别什么斯坦福 MIT六边形，你就是菜
9. 搞政治也一样，3个 Director 级别的搞我一个 PE 都搞不定，说你们 3 个菜也没毛病吧
10. 职场，保护自己一个靠截图和录音，一个靠记心好，三，要有真本事